#!/usr/bin/env narwhal


var FILE = require("file");

require(FILE.absolute("../common.jake"));

$BUILD_PATH = FILE.join($BUILD_DIR, $CONFIGURATION, "Foundation");

task ("build", ["Foundation"]);

framework ("Foundation", function(FoundationTask)
{
    FoundationTask.setBuildIntermediatesPath(FILE.join($BUILD_DIR, "Foundation.build", $CONFIGURATION))
    FoundationTask.setBuildPath(FILE.join($BUILD_DIR, $CONFIGURATION));
    
    FoundationTask.setIdentifier("com.280n.Foundation");
    FoundationTask.setLicense(BundleTask.License.LGPL_v2_1);
    FoundationTask.setSources(FILE.glob("**/*.j").concat(FILE.glob("*.j")));//terrible!
    FoundationTask.setResources(FILE.glob("Resources/*"));
    FoundationTask.setFlattensSources(true);

    if ($CONFIGURATION === "Release")
        FoundationTask.setCompilerFlags("-O");
    else
        FoundationTask.setCompilerFlags("-DDEBUG -g");
});

//CLOBBER.include($ENVIRONMENT_PRODUCT)
